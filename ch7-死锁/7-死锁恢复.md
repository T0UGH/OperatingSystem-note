### 7.7 死锁恢复
---

- 当死锁检测算法确定死锁存在，可以采取的措施
    - 通知操作员死锁发生，以便操作员人为处理
    - 让系统从死锁状态中自动恢复回来

- 打破死锁的方法
    - 终止一个或多个进程以打破循环等待
    - 从一个或多个死锁进程那里抢占一个或多个资源

- 不管采用哪种方法系统都会收回分配给被终止进程的所有资源

---
#### 7.7.1 进程终止
- 两种方案
    1. 终止所有死锁进程
        - 开销过大
    2. 一次只终止一个进程直到取消死锁循环为止
        - 每终止一个进程，都要调用死锁检测算法以确定进程是否还死锁
        - 开销过大
        - 如何确定应该终止哪个进程来打破死锁
            - 这是个经济问题
            - 每次终止代价最小的
---
#### 7.7.2 资源抢占

- 定义：逐步从进程中抢占资源给其他进程使用

- 如果要求使用抢占来处理死锁，有三个问题需要解决
    1. 选择一个牺牲品
        - 必须确定抢占顺序以使代价最小化
    2. 回滚
        - 如果从某个进程抢占了资源，必须将该进程回滚到某个安全状态
        - 最简单的方法是完全回滚
    3. 饥饿
        - 如果一个系统是基于代价来选择牺牲进程，那么同一进程可能总是被选为牺牲品。它永远也完成不了
        - 最为常见的方法是在代价因素中加上回滚次数
---
&copy; 2018 T0UGH. All rights reserved.