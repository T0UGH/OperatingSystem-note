### 10.3 目录结构
---

- 一个系统可有若干文件系统，且文件系统可有不同类型

- 目录：用于管理和组织文件
---
#### 10.3.1 存储结构

- 分区：磁盘上的部分称为分区

- 每个磁盘分区都可以创建一个文件系统

- 也可将多个分区组合起来创建一个文件系统

- 设备目录：用于记录文件系统上所有文件的信息如名称、位置、大小等
---
#### 10.3.2 目录概述

- 目录：可看作符号表，能将文件名称转换成目录条目

- 目录需要支持的操作
    - 搜索文件
    - 创建文件
    - 删除文件
    - 遍历目录
    - 重命名文件
    - 跟踪文件系统：即定期备份整个文件系统的内容和结构
---
#### 10.3.3 单层目录结构

- 简介：所有文件都包含在同一目录下

- 由于所有文件位于同一目录，它们必须具有唯一名称

- 随着文件数量增加，单层结构目录的单个用户会发现难以记住所有文件的名称
---
#### 10.3.4 双层目录结构

- 简介
    - 每个用户有自己的用户目录文件 ( user file directory,UFD )
    - 系统有主文件目录( master file directory,MFD )，用来存储UFD

- 不同用户可拥有具有相同名称的文件

- 缺点：用户之间进行合作比较困难
---
#### 10.3.5 树状目录结构

- 简介
    - 目录包括一组文件和子目录
    - 允许用户在目录下创建子目录
    - 一个目录只不过是一个需要按照特定方式访问的文件

- 当前目录
    - 每个进程都有一个当前目录
    - 当前目录包括进程当前感兴趣的绝大多数文件
    - 例如:java中主线程的当前目录是项目目录

- 路径名的两种形式
    - 绝对路径名：从根开始并给出路径上的目录名直到所指定的文件
    - 相对路径名：从当前目录开始定义路径

- 如何处理删除目录
    - 如果目录为空，则可简单删除
    - 如果目录不为空
        - 可以不允许用户删除
        - 也可删除此目录，并删除其所有子目录和文件
---
#### 10.3.6 无环图目录

- 简介
    - 无环图允许目录含有共享子目录和文件
    - 同一文件或子目录可出现在两个不同目录下
    - 对于共享文件，只存在一个真正文件，所以任何改变都会为其他用户所见

- 实现共享文件的方法
    1. 创建一个称为链接的新目录条目
        - 链接实际上是另一文件或目录的指针
    2. 简单地在共享目录中重复所有共享文件的信息
        - 复制目录条目存在的主要问题是在修改文件时要维护一致性

- 无环图需要解决的问题
    - 现在一个文件可有多个绝对路径名
    - 分配给共享文件的空间什么时候删除
        1. 对于采用符号链接实现共享的系统
            - 删除链接时，只是简单地将链接删除，不影响原文件
            - 删除原文件时，使所有链接失效
        2. 保留文件直到删除其所有引用为止
            - 为每个文件保留一个引用列表或计数器，当列表为空或计数器为0时，就删除文件
---
#### 10.3.7 通用图目录

- 通用图目录可以存在环

- 需要避免多次搜索同一目录
---
&copy; 2018 T0UGH. All right reserved.