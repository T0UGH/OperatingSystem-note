### 3.2 进程调度
---

- 多道程序设计的目的：无论何时都有进程在执行，从而使CPU利用率达到最大化

- 分时系统的目的是在进程之间快速切换CPU以便用户在程序运行时能与其进行交互

- 进程调度选择一个可用的进程到CPU上执行
--- 
#### 3.2.1 调度队列

- 作业队列：进程进入系统时，会被加到作业队列中，该队列包括系统中的所有进程

- 就绪队列：驻留在内存中就绪的、等待运行的进程保存在就绪队列中

- 设备队列：等待特定I/O设备的进程列表称为设备队列

---
#### 3.2.2 调度程序

- 调度程序（scheduler）：进程在其生命周期中会在各种调度队列之间迁移。为了调度，操作系统必须按照某种方式从这些队列中选择进程。**进程选择**是由相应的**调度程序**来执行的

- **长期调度程序**（long-term scheduler）
    - 也称为**作业调度程序**（job scheduler）。从**进程缓冲池**（磁盘）中选择进程，并装入**内存**准备执行
    - 长期调度程序控制内存中的进程数量（**多道程序设计的程度**）
    - 如果多道程序的程度稳定，创建进程的平均速度必须等于进程离开系统的平均速度
    - 长期调度程序执行得并不频繁，因此长期调度程序可以使用更多时间选择进程
    - I/O为主的进程（I/O-bound process)：在执行I/O方面比执行计算要花费更多的时间
    - CPU为主的进程（CPU-bound process)：更多的时间用来执行计算
    - 长期调度系统应该选择合理的包含I/O为主和CPU为主的进程组合

- **短期调度程序**（short-term scheduler）
    - 也称为**CPU调度程序**，从准备执行的进程中选择进程
    - 短期调度程序必须**频繁**为CPU选择新进程
    - 因此短期调度程序必须要快

- 有些系统**没有**长期调度系统，只是简单地把所有新进程放到内存中以供短期调度程序使用

---
#### 3.2.3 上下文切换(Context Switch)

- 中断使CPU从当前任务改变为运行内核子程序

- 当中断发生时，系统需要保存当前运行在CPU中进程的上下文，从而在其处理完后能恢复上下文

- 进程上下文用进程的PCB来表示，包括CPU寄存器的值、进程状态和内存管理信息等

- 上下文切换：将CPU切换到另一个进程需要保存当前进程的状态并恢复另一个进程的状态

- 上下文切换是额外开销，切换时系统并不能做什么有用的工作
---
&copy; 2018 T0UGH. All rights reserved.