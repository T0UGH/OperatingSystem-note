### 5.4 多处理器调度
---
- 如果有多个CPU，则负载分配成为可能，但调度问题也相应地变得更为复杂
---
#### 5.4.1 多处理器调度的方法
---
- 非对称多处理（asymmetric multiprocessing）：在一个多处理器中，CPU调度的一种方法是让一个处理器处理所有的调度决定、I/O处理以及其他系统活动，其他的处理器只执行用户代码

- 对称多处理（symmetric multiprocessing，SMP）：
    - 每个处理器自我调度
    - 调度通过每个处理器检查共同就绪队列并选择一个进程来执行
    - 必须确保两个处理器不能选择同一进程，且进程不会从队列中丢失
---
#### 5.4.2 处理器亲和性
---
- 背景：进程最近访问的数据进入处理器缓存，如果进程移到其他处理器上，被迁移的第一个处理器的缓存中的内容必须是无效，而将要迁移到的第二个处理器的缓存需重新构造

- 定义：绝大多数SMP系统试图避免将进程从一个处理器移到另一个处理器，而是努力使一个进程在同一个处理器上运行，这被称为处理器亲和性

- 软亲和性不能完全保证一个进程保持在同一个处理器上

- 硬亲和性可以保证进程不会迁移到其他处理器上
---
#### 5.4.3 负载平衡( load balancing )
---
- 负载平衡设法将工作负载平均分配到SMP系统中的所有处理器上

- `push migration`：将进程从超载服务器移到空闲服务器

- `pull migration`：当空闲服务器推送一个等待任务时，发生 `pull migration`
---
&copy; 2018 T0UGH. All rights reserved.